<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>progressiv.id - Personalized Gain Plan</title>
    <style>
        /* --- CSS VARIABLES & RESET --- */
        :root {
            --primary: #E65100; 
            --secondary: #00796B; 
            --accent: #FFD600;
            --danger: #d32f2f;
            --dark: #263238;
            --light: #F5F5F5;
            --white: #FFFFFF;
            --bg-input: rgba(255,255,255,0.1);
        }

        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Poppins', sans-serif; }
        body { background-color: var(--light); color: var(--dark); line-height: 1.6; scroll-behavior: smooth; }

        /* --- HEADER --- */
        header { background: var(--white); padding: 1rem 5%; display: flex; justify-content: space-between; align-items: center; box-shadow: 0 2px 10px rgba(0,0,0,0.1); position: sticky; top: 0; z-index: 100; }
        .logo { font-size: 1.5rem; font-weight: 800; color: var(--primary); letter-spacing: -0.5px; }
        nav a { text-decoration: none; color: var(--dark); margin-left: 20px; font-weight: 500; transition: color 0.3s; }
        nav a:hover { color: var(--primary); }

        /* --- HERO SECTION --- */
        .hero { display: flex; align-items: center; justify-content: space-between; padding: 4rem 5%; background: linear-gradient(135deg, #FFF3E0 0%, #FFFFFF 100%); min-height: 80vh; }
        .hero-text { flex: 1; padding-right: 2rem; }
        .hero-text h1 { font-size: 3rem; margin-bottom: 1rem; color: var(--dark); }
        .hero-text span { color: var(--primary); }
        .hero-text p { font-size: 1.1rem; margin-bottom: 2rem; color: #546E7A; }
        .cta-btn { background-color: var(--primary); color: var(--white); padding: 15px 30px; border-radius: 50px; text-decoration: none; font-weight: 700; box-shadow: 0 4px 15px rgba(230, 81, 0, 0.3); transition: transform 0.2s; display: inline-block; }
        .cta-btn:hover { transform: translateY(-3px); background-color: #BF360C; }
        
        /* --- CALCULATOR SECTION --- */
        .calculator-section { background-color: var(--dark); color: var(--white); padding: 4rem 5%; text-align: center; }
        .calc-box { background: var(--bg-input); max-width: 500px; margin: 2rem auto; padding: 2rem; border-radius: 15px; text-align: left; }
        label { font-size: 0.9rem; color: #ddd; margin-bottom: 5px; display: block; margin-top: 15px; }
        .form-group { margin-bottom: 10px; }
        input, select { width: 100%; padding: 12px; border-radius: 8px; border: 1px solid #555; background: #37474F; color: white; font-size: 1rem; outline: none; }
        input:focus, select:focus { border-color: var(--primary); }
        .row-input { display: flex; gap: 15px; }
        .col { flex: 1; }
        .calc-btn { width: 100%; padding: 15px; background-color: var(--secondary); color: white; border: none; border-radius: 8px; cursor: pointer; font-weight: bold; margin-top: 25px; font-size: 1.1rem; transition: background 0.3s; }
        .calc-btn:hover { background-color: #004D40; }

        /* Result Box */
        #result-box { display: none; margin-top: 30px; padding: 20px; background: var(--white); color: var(--dark); border-radius: 10px; text-align: center; animation: fadeIn 0.5s; }
        #result-calories { font-size: 2.5rem; font-weight: 800; color: var(--primary); margin: 5px 0; }
        .prediction-box { background: #E0F2F1; padding: 15px; border-radius: 8px; margin-top: 15px; color: #004D40; border: 1px solid #00796B; }
        .macro-grid { display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 10px; margin-top: 15px; text-align: center; }
        .macro-item { background: #f9f9f9; padding: 10px; border-radius: 5px; font-size: 0.9rem; }
        .macro-val { font-weight: bold; display: block; font-size: 1.1rem; color: var(--dark); }

        /* --- FOOD GUIDE & ALLERGY FILTER STYLES --- */
        .section-title { text-align: center; margin-bottom: 10px; font-size: 2rem; color: var(--dark); }
        .section-desc { text-align: center; color: #666; margin-bottom: 3rem; }
        .common-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 2rem; padding: 0 5%; }

        .food-guide { padding: 4rem 0; background: var(--white); }
        
        /* Allergy Filter Box */
        .allergy-box {
            background: #FFF3E0;
            border: 1px solid #FFCCBC;
            margin: 0 5% 2rem 5%;
            padding: 1.5rem;
            border-radius: 10px;
            text-align: center;
        }
        .allergy-box h4 { margin-bottom: 15px; color: var(--primary); }
        .filter-options { display: flex; justify-content: center; flex-wrap: wrap; gap: 20px; }
        .checkbox-label { cursor: pointer; display: flex; align-items: center; gap: 8px; font-weight: 500; user-select: none; }
        .checkbox-label input { width: auto; margin: 0; cursor: pointer; }

        /* Food Cards & Interaction */
        .food-card { background: var(--light); padding: 2rem; border-radius: 15px; border-top: 5px solid #ccc; text-align: left; transition: transform 0.3s; }
        .food-card:hover { transform: translateY(-5px); box-shadow: 0 10px 20px rgba(0,0,0,0.1); }
        .food-card h3 { margin-bottom: 1.5rem; font-size: 1.3rem; }
        .food-card ul { list-style: none; }
        
        .food-item { margin-bottom: 12px; padding-bottom: 12px; border-bottom: 1px solid #ddd; display: flex; justify-content: space-between; align-items: center; transition: all 0.3s; }
        
        /* RESTRICTED ITEM STYLE */
        .food-item.restricted { opacity: 0.3; text-decoration: line-through; background-color: #ffebee; padding-left: 10px; padding-right: 10px; border-radius: 4px; }
        
        .badge { font-size: 0.75rem; padding: 3px 8px; border-radius: 4px; background: #ddd; font-weight: bold; }
        .card-protein { border-color: var(--primary); }
        .card-carbs { border-color: var(--accent); }
        .card-fats { border-color: var(--secondary); }

        /* --- WORKOUT SECTION --- */
        .workout-section { padding: 4rem 0; background: #ECEFF1; }
        .workout-card { background: var(--white); border-radius: 15px; overflow: hidden; box-shadow: 0 4px 15px rgba(0,0,0,0.05); transition: transform 0.3s; }
        .workout-card:hover { transform: translateY(-5px); }
        .workout-header { padding: 1.5rem; color: white; text-align: center; }
        .bg-push { background: linear-gradient(45deg, #FF5252, #D32F2F); }
        .bg-pull { background: linear-gradient(45deg, #448AFF, #1976D2); }
        .bg-legs { background: linear-gradient(45deg, #69F0AE, #388E3C); }
        .workout-header h3 { font-size: 1.5rem; margin-bottom: 5px; }
        .exercise-list { padding: 1.5rem; }
        .exercise-item { display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px; padding-bottom: 10px; border-bottom: 1px dashed #ccc; }
        .exercise-item:last-child { border-bottom: none; }
        .ex-name { font-weight: 600; color: var(--dark); display: block; }
        .ex-detail { font-size: 0.85rem; color: #78909C; }
        .set-reps { font-weight: bold; color: var(--primary); font-size: 0.9rem; background: #FFF3E0; padding: 5px 10px; border-radius: 5px; }

        @media (max-width: 768px) { .hero { flex-direction: column; text-align: center; } .hero-text { padding-right: 0; } }
    </style>
</head>
<body>

    <header>
        <div class="logo">progressiv.id</div>
        <nav>
            <a href="#kalkulator">Hitung</a>
            <a href="#food-guide">Nutrisi</a>
            <a href="#workout">Latihan</a>
        </nav>
    </header>

    <section class="hero">
        <div class="hero-text">
            <h1>Plan Your Gain <br><span>Execute The Goal</span></h1>
            <p>Platform lengkap untuk menaikkan berat badan: Hitung kalori, pilih nutrisi aman alergi, dan eksekusi latihan.</p>
            <a href="#kalkulator" class="cta-btn">Mulai Hitung</a>
        </div>
        <div class="hero-image" style="flex:1; display:flex; justify-content:center;">
            <div style="background:white; padding:2rem; border-radius:20px; box-shadow:0 10px 30px rgba(0,0,0,0.1); text-align:center; border:2px solid var(--secondary);">
                <h3>Target Tercapai?</h3>
                <div style="font-size:3rem;">üöÄ</div>
                <p>Let's find out when.</p>
            </div>
        </div>
    </section>

    <section id="kalkulator" class="calculator-section">
        <h2>Kalkulator Target & Durasi</h2>
        <p>Langkah 1: Ketahui angka kebutuhan tubuh Anda.</p>
        
        <div class="calc-box">
            <div class="form-group">
                <label>Jenis Kelamin</label>
                <select id="gender">
                    <option value="male">Pria</option>
                    <option value="female">Wanita</option>
                </select>
            </div>

            <div class="row-input">
                <div class="col">
                    <label>Berat Sekarang (kg)</label>
                    <input type="number" id="weight" placeholder="50">
                </div>
                <div class="col">
                    <label style="color:var(--primary); font-weight:bold;">Target Berat (kg)</label>
                    <input type="number" id="target-weight" placeholder="65" style="border-color:var(--primary);">
                </div>
            </div>

            <div class="form-group">
                <label>Tinggi Badan (cm)</label>
                <input type="number" id="height" placeholder="170">
            </div>

            <div class="form-group">
                <label>Usia (tahun)</label>
                <input type="number" id="age" placeholder="20">
            </div>

            <div class="form-group">
                <label>Tingkat Aktivitas</label>
                <select id="activity">
                    <option value="1.2">Sedenter (Jarang Olahraga)</option>
                    <option value="1.375">Ringan (Olahraga 1-3x/minggu)</option>
                    <option value="1.55">Sedang (Olahraga 3-5x/minggu)</option>
                    <option value="1.725">Berat (Olahraga 6-7x/minggu)</option>
                </select>
            </div>

            <button class="calc-btn" onclick="calculateAll()">Hitung Rencana</button>

            <div id="result-box">
                <h3>Target Kalori Harian</h3>
                <div id="result-calories">0 kcal</div>
                <p style="font-size:0.9rem; color:#666;">(Surplus +500 Kalori)</p>

                <div class="prediction-box">
                    <h4>üìÖ Estimasi Waktu</h4>
                    <p>Untuk naik <strong id="diff-kg">0</strong> kg, Anda butuh waktu sekitar:</p>
                    <h2 id="duration-text" style="margin:10px 0;">0 Minggu</h2>
                    <small>*Asumsi konsisten surplus setiap hari.</small>
                </div>

                <div class="macro-grid">
                    <div class="macro-item">Protein <span id="macro-p" class="macro-val">0g</span></div>
                    <div class="macro-item">Karbo <span id="macro-c" class="macro-val">0g</span></div>
                    <div class="macro-item">Lemak <span id="macro-f" class="macro-val">0g</span></div>
                </div>
                
                <div style="margin-top: 20px;">
                    <a href="#food-guide" style="color: var(--primary); font-weight: bold; font-size: 0.9rem;">Lihat Menu & Latihan ‚Üì</a>
                </div>
            </div>
        </div>
    </section>

    <section id="food-guide" class="food-guide">
        <h2 class="section-title">Nutrisi (Fuel)</h2>
        <p class="section-desc">Langkah 2: Pilih bahan bakar. Gunakan filter jika Anda memiliki alergi.</p>
        
        <div class="allergy-box">
            <h4>‚õî Filter Alergi Saya:</h4>
            <div class="filter-options">
                <label class="checkbox-label">
                    <input type="checkbox" onchange="filterFoods()" value="dairy"> ü•õ Intoleransi Laktosa (Susu)
                </label>
                <label class="checkbox-label">
                    <input type="checkbox" onchange="filterFoods()" value="nuts"> ü•ú Alergi Kacang
                </label>
                <label class="checkbox-label">
                    <input type="checkbox" onchange="filterFoods()" value="gluten"> üçû Gluten Free
                </label>
                <label class="checkbox-label">
                    <input type="checkbox" onchange="filterFoods()" value="seafood"> üç§ Alergi Seafood
                </label>
            </div>
        </div>

        <div class="common-grid">
            <div class="food-card card-protein">
                <h3 style="color:var(--primary);">üçó Protein Sources</h3>
                <ul>
                    <li class="food-item"><span>Dada Ayam</span><span class="badge" style="color:var(--primary); background:#FFCCBC;">Safe</span></li>
                    <li class="food-item"><span>Daging Sapi</span><span class="badge" style="color:var(--primary); background:#FFCCBC;">Safe</span></li>
                    <li class="food-item" data-allergy="seafood"><span>Ikan Tuna/Salmon</span><span class="badge" style="color:var(--primary); background:#FFCCBC;">Seafood</span></li>
                    <li class="food-item" data-allergy="seafood"><span>Udang</span><span class="badge" style="color:var(--primary); background:#FFCCBC;">Seafood</span></li>
                    <li class="food-item"><span>Telur Utuh</span><span class="badge" style="color:var(--primary); background:#FFCCBC;">Gold Std</span></li>
                    <li class="food-item"><span>Tempe/Tahu</span><span class="badge" style="color:var(--primary); background:#FFCCBC;">Vegan</span></li>
                </ul>
            </div>

            <div class="food-card card-carbs">
                <h3 style="color:#F9A825;">üçö Carb Sources</h3>
                <ul>
                    <li class="food-item"><span>Nasi Putih</span><span class="badge" style="color:#F57F17; background:#FFF9C4;">Safe</span></li>
                    <li class="food-item" data-allergy="gluten"><span>Oatmeal</span><span class="badge" style="color:#F57F17; background:#FFF9C4;">Gluten?</span></li>
                    <li class="food-item" data-allergy="gluten"><span>Pasta/Spaghetti</span><span class="badge" style="color:#F57F17; background:#FFF9C4;">Gluten</span></li>
                    <li class="food-item" data-allergy="gluten"><span>Roti Gandum</span><span class="badge" style="color:#F57F17; background:#FFF9C4;">Gluten</span></li>
                    <li class="food-item"><span>Kentang/Ubi</span><span class="badge" style="color:#F57F17; background:#FFF9C4;">Safe</span></li>
                    <li class="food-item"><span>Pisang</span><span class="badge" style="color:#F57F17; background:#FFF9C4;">Safe</span></li>
                </ul>
            </div>

            <div class="food-card card-fats">
                <h3 style="color:var(--secondary);">ü•ë Healthy Fats</h3>
                <ul>
                    <li class="food-item" data-allergy="nuts"><span>Selai Kacang</span><span class="badge" style="color:var(--secondary); background:#B2DFDB;">Nut</span></li>
                    <li class="food-item" data-allergy="nuts"><span>Kacang Almond/Mete</span><span class="badge" style="color:var(--secondary); background:#B2DFDB;">Nut</span></li>
                    <li class="food-item"><span>Alpukat</span><span class="badge" style="color:var(--secondary); background:#B2DFDB;">Safe</span></li>
                    <li class="food-item"><span>Olive Oil</span><span class="badge" style="color:var(--secondary); background:#B2DFDB;">Safe</span></li>
                    <li class="food-item" data-allergy="dairy"><span>Susu Full Cream</span><span class="badge" style="color:var(--secondary); background:#B2DFDB;">Dairy</span></li>
                    <li class="food-item" data-allergy="dairy"><span>Keju</span><span class="badge" style="color:var(--secondary); background:#B2DFDB;">Dairy</span></li>
                </ul>
            </div>
        </div>
    </section>

    <section id="workout" class="workout-section">
        <h2 class="section-title">Program Latihan (PPL)</h2>
        <p class="section-desc">Langkah 3: Ubah kalori menjadi otot dengan metode <strong>Push / Pull / Legs</strong>.</p>

        <div class="common-grid">
            <div class="workout-card">
                <div class="workout-header bg-push">
                    <h3>üî• PUSH (Dorong)</h3>
                    <p>Dada, Bahu, Triceps</p>
                </div>
                <div class="exercise-list">
                    <div class="exercise-item">
                        <div><span class="ex-name">Push Up / Bench</span><span class="ex-detail">Target: Dada</span></div>
                        <span class="set-reps">3 x 10</span>
                    </div>
                    <div class="exercise-item">
                        <div><span class="ex-name">Overhead Press</span><span class="ex-detail">Target: Bahu</span></div>
                        <span class="set-reps">3 x 10</span>
                    </div>
                    <div class="exercise-item">
                        <div><span class="ex-name">Tricep Dips</span><span class="ex-detail">Target: Tricep</span></div>
                        <span class="set-reps">3 x Fail</span>
                    </div>
                </div>
            </div>

            <div class="workout-card">
                <div class="workout-header bg-pull">
                    <h3>‚öì PULL (Tarik)</h3>
                    <p>Punggung, Biceps</p>
                </div>
                <div class="exercise-list">
                    <div class="exercise-item">
                        <div><span class="ex-name">Pull Up / Lat Pulldown</span><span class="ex-detail">Target: Punggung Lebar</span></div>
                        <span class="set-reps">3 x 8</span>
                    </div>
                    <div class="exercise-item">
                        <div><span class="ex-name">Dumbbell Row</span><span class="ex-detail">Target: Punggung Tebal</span></div>
                        <span class="set-reps">3 x 12</span>
                    </div>
                    <div class="exercise-item">
                        <div><span class="ex-name">Bicep Curl</span><span class="ex-detail">Target: Lengan</span></div>
                        <span class="set-reps">3 x 12</span>
                    </div>
                </div>
            </div>

            <div class="workout-card">
                <div class="workout-header bg-legs">
                    <h3>‚ö° LEGS (Kaki)</h3>
                    <p>Paha, Bokong, Betis</p>
                </div>
                <div class="exercise-list">
                    <div class="exercise-item">
                        <div><span class="ex-name">Squat</span><span class="ex-detail">Target: Kaki Total</span></div>
                        <span class="set-reps">4 x 10</span>
                    </div>
                    <div class="exercise-item">
                        <div><span class="ex-name">Lunges</span><span class="ex-detail">Target: Paha</span></div>
                        <span class="set-reps">3 x 12</span>
                    </div>
                    <div class="exercise-item">
                        <div><span class="ex-name">Calf Raise</span><span class="ex-detail">Target: Betis</span></div>
                        <span class="set-reps">4 x 15</span>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <script>
        // --- 1. Calculator Logic ---
        function calculateAll() {
            const gender = document.getElementById('gender').value;
            const weight = parseFloat(document.getElementById('weight').value);
            const targetWeight = parseFloat(document.getElementById('target-weight').value);
            const height = parseFloat(document.getElementById('height').value);
            const age = parseFloat(document.getElementById('age').value);
            const activity = parseFloat(document.getElementById('activity').value);

            if (!weight || !targetWeight || !height || !age) {
                alert("Mohon isi semua kolom data.");
                return;
            }
            if (targetWeight <= weight) {
                alert("Target Berat Badan harus lebih tinggi dari Berat Sekarang!");
                return;
            }

            let bmr;
            if (gender === 'male') {
                bmr = (10 * weight) + (6.25 * height) - (5 * age) + 5;
            } else {
                bmr = (10 * weight) + (6.25 * height) - (5 * age) - 161;
            }

            const tdee = bmr * activity;
            const surplusCalories = 500; 
            const dailyTarget = Math.round(tdee + surplusCalories);
            const weightDiff = targetWeight - weight; 
            const weeksToGoal = weightDiff / 0.5; 
            const monthsToGoal = (weeksToGoal / 4).toFixed(1);

            let proteinGram = Math.round(weight * 2.2); 
            let fatGram = Math.round((dailyTarget * 0.25) / 9); 
            let carbGram = Math.round((dailyTarget - (proteinGram * 4) - (fatGram * 9)) / 4);

            document.getElementById('result-calories').innerText = dailyTarget + " kcal";
            document.getElementById('diff-kg').innerText = weightDiff.toFixed(1);
            
            let durationString = "";
            if (weeksToGoal < 4) {
                durationString = Math.round(weeksToGoal) + " Minggu";
            } else {
                durationString = Math.round(weeksToGoal) + " Minggu (" + monthsToGoal + " Bulan)";
            }
            document.getElementById('duration-text').innerText = durationString;

            document.getElementById('macro-p').innerText = proteinGram + "g";
            document.getElementById('macro-c').innerText = carbGram + "g";
            document.getElementById('macro-f').innerText = fatGram + "g";

            document.getElementById('result-box').style.display = "block";
            location.href = "#result-box";
        }

        // --- 2. [NEW] Allergy Filter Logic ---
        function filterFoods() {
            // Ambil semua checkbox yang dicentang
            const checkboxes = document.querySelectorAll('.filter-options input[type="checkbox"]');
            const selectedAllergies = Array.from(checkboxes)
                                           .filter(i => i.checked)
                                           .map(i => i.value);

            // Ambil semua list makanan
            const foodItems = document.querySelectorAll('.food-item');

            foodItems.forEach(item => {
                const itemAllergy = item.getAttribute('data-allergy');
                
                // Reset kondisi awal
                item.classList.remove('restricted');

                // Jika item ini memiliki label alergi, DAN alergi tersebut dicentang oleh user
                if (itemAllergy && selectedAllergies.includes(itemAllergy)) {
                    item.classList.add('restricted');
                }
            });
        }
    </script>
</body>
</html>